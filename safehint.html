<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>لعبة الخزنة</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--text:#e6eef8;--accent:#1e293b}
    *{box-sizing:border-box}
    body{margin:0;font-family:Tahoma, Arial, sans-serif;background:linear-gradient(180deg,#071029 0%, #0b1624 100%);color:var(--text);display:flex;align-items:center;justify-content:center;height:100vh}
    .card{background:var(--card);padding:24px;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,.6);width:360px;position:relative}
    h1{font-size:20px;margin:0 0 12px;text-align:center}
    p.small{font-size:13px;color:#9fb0c8;margin:6px 0 14px;text-align:center}
    .code{display:flex;gap:10px;justify-content:center;margin-bottom:14px}
    .code input{width:56px;height:64px;font-size:28px;text-align:center;border-radius:8px;border:2px solid rgba(255,255,255,.06);background:#081223;color:var(--text);outline:none;direction:ltr}
    .buttons{display:flex;gap:10px;justify-content:center;margin-bottom:12px}
    button{padding:10px 14px;border-radius:10px;border:none;background:#0ea5a4;color:#012;cursor:pointer;font-weight:700}
    button.secondary{background:#334155;color:var(--text)}
    .msg{min-height:44px;border-radius:8px;padding:10px;margin-top:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;align-items:center;justify-content:center;text-align:center}
    .hint{margin-top:10px;font-size:20px;font-weight:bold;text-align:center;cursor:pointer;display:none;color:red;animation:blink 1s infinite alternate;}
    .footer{font-size:12px;color:#88a7bf;margin-top:10px;text-align:center}

    @keyframes blink {
      0% { text-shadow: 0 0 5px red, 0 0 10px white; }
      50% { text-shadow: 0 0 15px red, 0 0 20px white; }
      100% { text-shadow: 0 0 5px red, 0 0 10px white; }
    }

    @media (max-width:420px){.card{width:92vw}}
  </style>
</head>
<body>
  <div class="card">
    <h1>محاولة فتح الخزنة المعدنية</h1>
    <p class="small">أدخل رمز مكوّن من 4 أرقام. الرقم الصحيح يصبح أخضر، الخاطئ يصبح أحمر.</p>

    <div class="code">
      <input inputmode="numeric" pattern="[0-9]*" maxlength="1" id="d1">
      <input inputmode="numeric" pattern="[0-9]*" maxlength="1" id="d2">
      <input inputmode="numeric" pattern="[0-9]*" maxlength="1" id="d3">
      <input inputmode="numeric" pattern="[0-9]*" maxlength="1" id="d4">
    </div>

    <div class="buttons">
      <button id="tryBtn">افتح الخزنة</button>
      <button class="secondary" id="resetBtn">إعادة</button>
    </div>

    <div class="msg" id="status">انتظر... أدخل الأربعة أرقام ثم اضغط "افتح الخزنة".</div>

    <div class="hint" id="hint">تلميح</div>
    <div class="footer">ملاحظة: لا تستخدم الموقع في الواقع لفتح ممتلكات لا تخصك.</div>
  </div>

  <script>
    const CODE = "2702";
    const inputs = [document.getElementById('d1'),document.getElementById('d2'),document.getElementById('d3'),document.getElementById('d4')];
    const status = document.getElementById('status');
    const tryBtn = document.getElementById('tryBtn');
    const resetBtn = document.getElementById('resetBtn');
    const hint = document.getElementById('hint');

    function checkDigit(i){
      const val = inputs[i].value;
      if(!val){ inputs[i].style.background=''; inputs[i].style.color=''; inputs[i].style.borderColor=''; return; }
      if(val === CODE[i]){
        inputs[i].style.background = '#1f6f4b';
        inputs[i].style.color = '#e9fff7';
        inputs[i].style.borderColor = '#153b2a';
      } else {
        inputs[i].style.background = '#7b1f1f';
        inputs[i].style.color = '#fff1f1';
        inputs[i].style.borderColor = '#501414';
      }
    }

    inputs.forEach((inp, idx) => {
      inp.addEventListener('input', e=>{
        const v = e.target.value.replace(/[^0-9]/g,'').slice(-1);
        e.target.value = v;
        checkDigit(idx);
        if(v && idx < inputs.length-1) inputs[idx+1].focus();
      });
      inp.addEventListener('keydown', e=>{
        if(e.key === 'Backspace' && !inp.value && idx>0){ inputs[idx-1].focus(); }
      });
    });

    function tryOpen(){
      const attempt = inputs.map(i=>i.value).join('');
      if(attempt.length < 4){ status.textContent = 'أكمل إدخال الأربعة أرقام أولاً.'; return; }
      if(attempt === CODE){
        status.textContent = '';
        hint.style.display = 'block';
      } else {
        status.textContent = 'رمز خاطئ — حاول مرة أخرى.';
      }
    }

    tryBtn.addEventListener('click', tryOpen);
    resetBtn.addEventListener('click', ()=>{
      inputs.forEach(i=>{ i.value=''; i.style.background=''; i.style.color=''; i.style.borderColor=''; });
      status.textContent = 'تمت إعادة الضبط. أدخل رمزاً جديداً.';
      inputs[0].focus();
      hint.style.display = 'none';
    });

    hint.addEventListener('click', ()=>{
      status.innerHTML = 'الشبكات الاجتماعية: فخ المجرمين الرقمي.<br><br>غالبًا ما يكشف المجرمون عن أنفسهم عبر الإنترنت بثقة زائدة أو خطأ غير مقصود. قد يتباهون بتلميحات غامضة، أو ينشرون صورة تكشف تفصيلاً دامغاً في الخلفية، أو يقدمون رواية تتعارض مع أدلة رقمية (كموقع أو وقت النشر). يحول الغرور والضغط النفسي حساباتهم من أداة للتخفي إلى دليل إدانة.';
    });

    inputs[0].focus();
  </script>
</body>
</html>
